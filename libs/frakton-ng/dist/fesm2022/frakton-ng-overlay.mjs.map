{"version":3,"file":"frakton-ng-overlay.mjs","sources":["../../overlay/src/tokens/overlay-info.ts","../../overlay/src/anchor/fkt-overlay-anchor.component.ts","../../overlay/src/fkt-overlay.service.ts","../../overlay/src/frakton-ng-overlay.ts"],"sourcesContent":["import { InjectionToken, signal } from \"@angular/core\";\r\nimport { FktGeometryPosition } from 'frakton-ng/internal/types';\r\n\r\nexport const OVERLAY_INFO = new InjectionToken('overlay-info', {\r\n\tfactory: () => ({\r\n\t\tcurrentPosition: signal<FktGeometryPosition | null>(null)\r\n\t})\r\n});\r\n","import {\r\n\tComponent,\r\n\tcomputed,\r\n\teffect,\r\n\tElementRef,\r\n\tinject,\r\n\tinput,\r\n\toutput,\r\n\tsignal,\r\n\tviewChild,\r\n\tViewContainerRef\r\n} from '@angular/core';\r\nimport { FktGeometryAlignmentService } from 'frakton-ng/internal/services';\r\nimport { MarkUsed } from 'frakton-ng/internal/utils';\r\nimport { FktGeometryPosition } from 'frakton-ng/internal/types';\r\nimport { elementSizeSignal, outsideClickEffect, isElementInside } from 'frakton-ng/internal/utils';\r\nimport { OVERLAY_INFO } from '../tokens/overlay-info';\r\n\r\n@Component({\r\n\tselector: 'fkt-overlay-anchor',\r\n\ttemplate: ` <div class=\"overlay-container\">\r\n\t\t<ng-template #container></ng-template>\r\n\t</div>`,\r\n\tstyles: `\r\n\t\t:host {\r\n\t\t\tposition: absolute;\r\n\t\t\theight: fit-content;\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\r\n\t\t.overlay-container {\r\n\t\t\tmin-width: var(--min-width, 200px);\r\n\t\t\tmax-height: var(--max-height, 300px);\r\n\t\t\toverflow: var(--overflow, auto);\r\n\t\t\tbackground-color: var(--background-color, white);\r\n\t\t\tbox-shadow: var(--box-shadow, -4px 7px 20px 0px rgba(0, 0, 0, 0.18));\r\n\t\t\tpadding: var(--padding);\r\n\t\t\tborder-radius: var(--border-radius, 10px);\r\n\t\t}\r\n\t`,\r\n\tstandalone: true,\r\n\thost: {\r\n\t\t'[style.opacity]': 'canShow() ? 1 : 0',\r\n\t\t'[style.left.px]': 'alignedPosition()?.result?.x ?? 0',\r\n\t\t'[style.top.px]': 'alignedPosition()?.result?.y ?? 0',\r\n\t\t'[style.width]': 'internalWidth()',\r\n\t\t'[style.--max-height]': 'maxHeight()',\r\n\t\t'[style.--padding]': 'padding()',\r\n\t\t'[style.--min-width]': 'minWidth()',\r\n\t\t'[style.--border-radius]': 'borderRadius()',\r\n\t\t'[style.--background-color]': 'backgroundColor()',\r\n\t\t'[style.--overflow]': 'overflow()',\r\n\t\t'[style.--box-shadow]': 'boxShadow()',\r\n\t\t'[id]': 'id()',\r\n\t},\r\n})\r\nexport class FktOverlayAnchorComponent {\r\n\tcontainer = viewChild.required('container', { read: ViewContainerRef });\r\n\r\n\tid = input.required<string>();\r\n\tanchor = input.required<ElementRef>();\r\n\tspacing = input(16);\r\n\tposition = input<FktGeometryPosition>();\r\n\tdisableAutoReposition = input<boolean>();\r\n\tmaxHeight = input('300px');\r\n\tminWidth = input('200px');\r\n\twidth = input<string>();\r\n\tpadding = input<string>();\r\n\tborderRadius = input<string>();\r\n\tbackgroundColor = input<string>();\r\n\toverflow = input<'hidden' | 'visible' | 'scroll' | 'auto'>();\r\n\tboxShadow = input<string>();\r\n\toutsideClick = output<HTMLElement>();\r\n\r\n\tcloseClick = output();\r\n\tprivate alignmentService = inject(FktGeometryAlignmentService);\r\n\tprivate overlayInfo = inject(OVERLAY_INFO);\r\n\r\n\t@MarkUsed()\r\n\tprotected autoClose = outsideClickEffect((element) => {\r\n\t\tif(!(element instanceof HTMLElement))\r\n\t\t\treturn;\r\n\r\n\t\tif(isElementInside(element, this.anchor().nativeElement))\r\n\t\t\treturn;\r\n\r\n\t\tthis.outsideClick.emit(element);\r\n\t});\r\n\r\n\r\n\tprivate elementRef = inject(ElementRef);\r\n\r\n\tprotected sizeSignal = elementSizeSignal(this.elementRef.nativeElement, {\r\n\t\tstartWithNull: true,\r\n\t});\r\n\tprotected canShow = signal(false);\r\n\tprotected internalWidth = computed(() => {\r\n\t\tconst width = this.width();\r\n\r\n\t\tif(width) return width;\r\n\r\n\t\treturn `${this.anchor().nativeElement.getBoundingClientRect().width}px`;\r\n\t});\r\n\r\n\tprotected alignedPosition = computed(() => {\r\n\t\tconst anchor = this.anchor() as ElementRef<HTMLElement>;\r\n\r\n\t\tconst anchorRect = anchor.nativeElement.getBoundingClientRect();\r\n\t\tconst size = this.sizeSignal();\r\n\r\n\r\n\t\tif (!size) return null;\r\n\r\n\t\treturn this.alignmentService.smartAlignTargetTo({\r\n\t\t\tanchor: anchorRect,\r\n\t\t\ttargetSize: size,\r\n\t\t\tdisableAutoReposition: this.disableAutoReposition() ?? false,\r\n\t\t\tpreferredPositions: [this.position() ?? 'bottom-center'],\r\n\t\t});\r\n\t});\r\n\r\n\t@MarkUsed()\r\n\tprotected updateOverlayInfoPosition = effect(() => {\r\n\t\tconst alignedPosition = this.alignedPosition();\r\n\r\n\t\tthis.overlayInfo.currentPosition.set(alignedPosition?.position ?? null);\r\n\t});\r\n\r\n\t@MarkUsed()\r\n\tprotected updateVisibility = effect(() => {\r\n\t\tif (this.sizeSignal()) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.canShow.set(true);\r\n\t\t\t}, 100);\r\n\t\t}\r\n\t});\r\n}\r\n","import { inject, Injectable, Injector, signal } from '@angular/core';\r\nimport { FktOverlayAnchorComponent } from './anchor/fkt-overlay-anchor.component';\r\nimport { createComponentBindings } from 'frakton-ng/internal/utils';\r\nimport { FktElementAnchorService } from 'frakton-ng/internal/services';\r\nimport { FktGeometryPosition } from 'frakton-ng/internal/types';\r\nimport { FktOverlayOptions, FktOverlayRef } from './fkt-overlay.types';\r\nimport { OVERLAY_INFO } from './tokens/overlay-info';\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root',\r\n})\r\nexport class FktOverlayService {\r\n\tprivate anchorService = inject(FktElementAnchorService);\r\n\tprivate overlays = new Map<string, FktOverlayRef<any>>();\r\n\r\n\topen<T>(options: FktOverlayOptions<T>) {\r\n\t\tif (options.panelOptions?.id && !this.canUseId(options.panelOptions.id))\r\n\t\t\tthrow new Error(\r\n\t\t\t\t`The overlay id \"${options.panelOptions.id}\" is already in use. Please choose a different id.`,\r\n\t\t\t);\r\n\r\n\t\tconst id = options.panelOptions?.id ?? this.createId();\r\n\r\n\t\tconst injector = Injector.create({\r\n\t\t\tproviders: [\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: OVERLAY_INFO,\r\n\t\t\t\t\tuseValue: {\r\n\t\t\t\t\t\tcurrentPosition: signal<FktGeometryPosition | null>(null),\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\r\n\t\tconst close = () => {\r\n\t\t\tthis.overlays.delete(id);\r\n\t\t\tanchor.destroy();\r\n\t\t\tcomponentRef.destroy();\r\n\t\t}\r\n\r\n\t\tconst anchor = this.anchorService.createAnchor(\r\n\t\t\tFktOverlayAnchorComponent,\r\n\t\t\t{\r\n\t\t\t\tanchor: options.anchorElementRef,\r\n\t\t\t\tid,\r\n\t\t\t\twidth: options.panelOptions?.width,\r\n\t\t\t\tposition: options.panelOptions?.position,\r\n\t\t\t\tpadding: options?.panelOptions?.padding,\r\n\t\t\t\tmaxHeight: options.panelOptions?.maxHeight ?? '300px',\r\n\t\t\t\tminWidth: options.panelOptions?.minWidth ?? '200px',\r\n\t\t\t\tborderRadius: options.panelOptions?.borderRadius ?? '10px',\r\n\t\t\t\tbackgroundColor: options.panelOptions?.backgroundColor,\r\n\t\t\t\tdisableAutoReposition: options.panelOptions?.disableAutoReposition ?? false,\r\n\t\t\t\toverflow: options.panelOptions?.overflow,\r\n\t\t\t\tboxShadow: options.panelOptions?.boxShadow,\r\n\t\t\t\toutsideClick: (element) => {\r\n\t\t\t\t\toptions?.panelOptions?.outsideClick?.(element);\r\n\t\t\t\t\tclose();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinjector\r\n\t\t);\r\n\r\n\t\tconst componentRef = anchor.componentRef.instance\r\n\t\t\t.container()\r\n\t\t\t.createComponent(options.component, {\r\n\t\t\t\tbindings: createComponentBindings(\r\n\t\t\t\t\toptions.component,\r\n\t\t\t\t\toptions.data,\r\n\t\t\t\t),\r\n\t\t\t});\r\n\r\n\t\tconst overlayRef: FktOverlayRef<T> = {\r\n\t\t\tcomponentRef,\r\n\t\t\tclose,\r\n\t\t};\r\n\r\n\t\tthis.overlays.set(id, overlayRef);\r\n\r\n\t\treturn overlayRef;\r\n\t}\r\n\r\n\tprivate canUseId(id: string) {\r\n\t\treturn !this.overlays.has(id);\r\n\t}\r\n\r\n\tprivate createId() {\r\n\t\tlet counter = 1;\r\n\t\tlet id = `overlay-container-${counter}`;\r\n\r\n\t\twhile (!this.canUseId(id)) {\r\n\t\t\tcounter++;\r\n\t\t\tid = `overlay-container-${counter}`;\r\n\t\t}\r\n\r\n\t\treturn id;\r\n\t}\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}