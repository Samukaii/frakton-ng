{"version":3,"file":"frakton-ng-date-picker.mjs","sources":["../../date-picker/src/modal/fkt-date-picker-modal.component.ts","../../date-picker/src/modal/fkt-date-picker-modal.component.html","../../date-picker/src/fkt-date-picker.component.ts","../../date-picker/src/fkt-date-picker.component.html","../../date-picker/src/frakton-ng-date-picker.ts"],"sourcesContent":["import { Component, input, linkedSignal, output } from '@angular/core';\r\nimport { FktCalendarComponent, FktCalendarDateConfigFn } from 'frakton-ng/calendar';\r\n\r\n@Component({\r\n\tselector: 'fkt-date-picker-modal',\r\n\timports: [FktCalendarComponent],\r\n\ttemplateUrl: './fkt-date-picker-modal.component.html',\r\n\tstyleUrl: './fkt-date-picker-modal.component.scss',\r\n})\r\nexport class FktDatePickerModalComponent {\r\n\tcurrentDate = input<Date>(new Date());\r\n\tselect = output<Date>();\r\n\r\n\tprotected internalCurrentDate = linkedSignal(this.currentDate);\r\n\r\n\tprotected dateConfigFn: FktCalendarDateConfigFn = date => {\r\n\t\treturn {\r\n\t\t\tonClick: () => {\r\n\t\t\t\tthis.internalCurrentDate.set(date);\r\n\t\t\t\tthis.select.emit(date);\r\n\t\t\t},\r\n\t\t};\r\n\t};\r\n}\r\n","<fkt-calendar\r\n\t[(currentDate)]=\"internalCurrentDate\"\r\n\t[configFn]=\"dateConfigFn\"\r\n/>\r\n","import { Component, inject, input } from '@angular/core';\r\nimport { FktInputComponent } from 'frakton-ng/input';\r\nimport { SignalFormControl, dateTransformer } from 'frakton-ng/forms';\r\nimport { FktOverlayService, FktOverlayRef } from 'frakton-ng/overlay';\r\nimport { FktDatePickerModalComponent } from './modal/fkt-date-picker-modal.component';\r\nimport { isValidDateString, MarkUsed, outsideClickEffect } from 'frakton-ng/internal/utils';\r\nimport { FktGeometryPosition } from 'frakton-ng/internal/types';\r\nimport { FktButtonComponent } from 'frakton-ng/button';\r\n\r\n@Component({\r\n\tselector: 'fkt-date-picker',\r\n\timports: [FktInputComponent, FktButtonComponent],\r\n\ttemplateUrl: './fkt-date-picker.component.html',\r\n\tstyleUrl: './fkt-date-picker.component.scss',\r\n})\r\nexport class FktDatePickerComponent {\r\n\tlabel = input<string>();\r\n\tplaceholder = input<string>();\r\n\tcontrol = input.required<SignalFormControl<any>>();\r\n\r\n\tprivate overlay = inject(FktOverlayService);\r\n\tprivate overlayRef: FktOverlayRef<FktDatePickerModalComponent> | null =\r\n\t\tnull;\r\n\r\n\tprotected transformer = dateTransformer;\r\n\r\n\t@MarkUsed()\r\n\tprotected autoclose = outsideClickEffect(\r\n\t\t() => {\r\n\t\t\tthis.closeModal();\r\n\t\t},\r\n\t\t{\r\n\t\t\texcludeIdsOrElements: ['calendar-datepicker-modal'],\r\n\t\t},\r\n\t);\r\n\r\n\tprotected openModal(ref: HTMLElement, position: FktGeometryPosition) {\r\n\t\tif (this.overlayRef) {\r\n\t\t\tthis.closeModal();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.overlayRef = this.overlay.open({\r\n\t\t\tcomponent: FktDatePickerModalComponent,\r\n\t\t\tdata: {\r\n\t\t\t\tcurrentDate: this.getCurrentDate(this.control().value()),\r\n\t\t\t\tselect: date => {\r\n\t\t\t\t\tthis.control().setValue(date);\r\n\t\t\t\t\tthis.closeModal();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tanchorElementRef: { nativeElement: ref },\r\n\t\t\tpanelOptions: {\r\n\t\t\t\tid: 'calendar-datepicker-modal',\r\n\t\t\t\twidth: 'fit-content',\r\n\t\t\t\tposition,\r\n\t\t\t\tmaxHeight: 'fit-content',\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getCurrentDate(value: unknown) {\r\n\t\tif (value instanceof Date) return value;\r\n\r\n\t\tif (typeof value === 'string' && isValidDateString(value))\r\n\t\t\treturn new Date(value);\r\n\r\n\t\treturn new Date();\r\n\t}\r\n\r\n\tprivate closeModal() {\r\n\t\tthis.overlayRef?.close();\r\n\t\tthis.overlayRef = null;\r\n\t}\r\n}\r\n","<fkt-input\r\n\t#input\r\n\t[label]=\"label() ?? ''\"\r\n\t(click)=\"openModal(input.element()?.nativeElement!, 'bottom-start')\"\r\n\t[placeholder]=\"placeholder() ?? ''\"\r\n\t[transformer]=\"transformer\"\r\n\t[control]=\"control()\"\r\n>\r\n\t<div #ref class=\"mr-1\" *fktFormControlSuffix>\r\n\t\t<fkt-button\r\n\t\t\ttheme=\"basic\"\r\n\t\t\t(click)=\"$event.stopImmediatePropagation(); openModal(ref, 'bottom-end')\"\r\n\t\t\ticon=\"calendar\"\r\n\t\t\tcolor=\"primary\"\r\n\t\t/>\r\n\t</div>\r\n</fkt-input>\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}