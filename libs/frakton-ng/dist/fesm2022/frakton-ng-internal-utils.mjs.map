{"version":3,"file":"frakton-ng-internal-utils.mjs","sources":["../../internal/utils/clamp-number.ts","../../internal/utils/normalize-date.ts","../../internal/utils/compare-dates.ts","../../internal/utils/control-errors-signal.ts","../../internal/utils/create-component-bindings.ts","../../internal/utils/is-number.ts","../../internal/utils/mark-used.ts","../../internal/utils/outside-click-effect.ts","../../internal/utils/outside-mouse-enter-watcher.ts","../../internal/utils/is-element-inside.ts","../../internal/utils/element-size-signal.ts","../../internal/utils/is-valid-date-string.ts","../../internal/utils/wait.ts","../../internal/utils/is-iso-date-string.ts","../../internal/utils/geometry-position-calculations.ts","../../internal/utils/frakton-ng-internal-utils.ts"],"sourcesContent":["export const clampNumber = (value: number, min: number, max: number) => {\r\n\treturn Math.min(Math.max(value, min), max);\r\n};\r\n","const normalizeLevels = {\r\n\t'year': date => {\r\n\t\tdate.setMonth(0, 1);\r\n\t\tdate.setHours(12, 0, 0, 0);\r\n\r\n\t\treturn date;\r\n\t},\r\n\t'month': date => {\r\n\t\tdate.setDate(1);\r\n\t\tdate.setHours(12, 0, 0, 0);\r\n\r\n\t\treturn date;\r\n\t},\r\n\t'date': date => {\r\n\t\tdate.setHours(12, 0, 0, 0);\r\n\r\n\t\treturn date;\r\n\t},\r\n\t'hour': date => {\r\n\t\tdate.setMinutes(0, 0, 0);\r\n\r\n\t\treturn date;\r\n\t},\r\n\t'minute': date => {\r\n\t\tdate.setSeconds(0, 0);\r\n\r\n\t\treturn date;\r\n\t},\r\n\t'seconds': date => {\r\n\t\tdate.setMilliseconds(0);\r\n\r\n\t\treturn date;\r\n\t},\r\n} as const satisfies Record<string, ((date: Date) => Date)>;\r\n\r\nexport type NormalizeLevel = keyof typeof normalizeLevels;\r\n\r\nexport const normalizeDate = (date: Date | string, level: NormalizeLevel) => {\r\n\treturn normalizeLevels[level](new Date(date));\r\n};\r\n","import { normalizeDate, NormalizeLevel } from './normalize-date';\r\n\r\nexport const compareDates = (\r\n\tfirst: Date | string,\r\n\tsecond: Date | string,\r\n\tlevel: NormalizeLevel = 'date',\r\n) => {\r\n\tconst result =\r\n\t\tnormalizeDate(first, level).getTime() -\r\n\t\tnormalizeDate(second, level).getTime();\r\n\r\n\tif(result === 0) return 'equal';\r\n\r\n\tif(result > 0) return 'first-is-greater';\r\n\treturn 'second-is-greater';\r\n};\r\n","import { ControlEvent, FormControl, TouchedChangeEvent, ValidationErrors, ValueChangeEvent } from \"@angular/forms\";\r\nimport { filter, Subscription } from 'rxjs';\r\nimport { afterRenderEffect, DestroyRef, inject, isSignal, signal, Signal } from '@angular/core';\r\n\r\ninterface ControlErrorsSignal {\r\n\t(control: FormControl | Signal<FormControl>): Signal<ValidationErrors | null>;\r\n}\r\n\r\nexport const controlErrorsSignal: ControlErrorsSignal = (control) => {\r\n\tconst destroyRef = inject(DestroyRef);\r\n  const controlErrors = signal<ValidationErrors | null>(null, {equal: () => false});\r\n  let subscription: Subscription | null = null;\r\n\r\n  const watchFormControl = <T>(control: FormControl<T>) => {\r\n    let changes = control.events;\r\n\r\n    controlErrors.set(control.errors);\r\n\r\n    const matchEvent = (event: ControlEvent) => {\r\n      const events = [\r\n        ValueChangeEvent,\r\n        TouchedChangeEvent\r\n      ];\r\n\r\n      return !!events.find(targetEvent => event instanceof targetEvent);\r\n    }\r\n\r\n    return changes.pipe(filter(matchEvent)).subscribe(() => {\r\n      controlErrors.set(control.errors);\r\n    });\r\n  }\r\n\r\n\tif(!isSignal(control)) {\r\n\t\tsubscription = watchFormControl(control);\r\n\t}\r\n  else {\r\n    afterRenderEffect(() => {\r\n      subscription = watchFormControl(control())\r\n    });\r\n  }\r\n\r\n\tdestroyRef.onDestroy(() => {\r\n\t\tsubscription?.unsubscribe();\r\n\t});\r\n\r\n\treturn controlErrors;\r\n};\r\n","import {\r\n\tBinding,\r\n\tinputBinding,\r\n\tisSignal,\r\n\toutputBinding,\r\n\treflectComponentType,\r\n\tsignal,\r\n\ttwoWayBinding,\r\n\tType,\r\n\tWritableSignal,\r\n} from '@angular/core';\r\nimport { FktReactiveComponentData } from 'frakton-ng/internal/types';\r\n\r\nconst isWritableSignal = (value: unknown): value is WritableSignal<any> => {\r\n\tif (!isSignal(value)) return false;\r\n\r\n\tconst conditions = [\r\n\t\t'update' in value,\r\n\t\t'set' in value,\r\n\t\t'asReadonly' in value,\r\n\t];\r\n\r\n\treturn conditions.every(Boolean);\r\n};\r\n\r\nexport const createComponentBindings = <T>(\r\n\tcomponent: Type<T>,\r\n\tdata: Partial<FktReactiveComponentData<T>>,\r\n) => {\r\n\tconst bindings: Binding[] = [];\r\n\r\n\tconst mirror = reflectComponentType(component);\r\n\r\n\tmirror?.inputs.forEach(input => {\r\n\t\tconst name = input.templateName;\r\n\r\n\t\tconst isTwoWayBinding = !!mirror?.outputs.find(\r\n\t\t\toutput => output.templateName === `${name}Change`,\r\n\t\t);\r\n\r\n\t\tif (isTwoWayBinding) {\r\n\t\t\tif (name in data) {\r\n\t\t\t\tconst value = data[name as keyof typeof data];\r\n\t\t\t\tbindings.push(\r\n\t\t\t\t\ttwoWayBinding(\r\n\t\t\t\t\t\tinput.templateName,\r\n\t\t\t\t\t\tisWritableSignal(value) ? value : signal(value),\r\n\t\t\t\t\t),\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (name in data) {\r\n\t\t\tconst value = data[name as keyof typeof data];\r\n\t\t\tbindings.push(\r\n\t\t\t\tinputBinding(\r\n\t\t\t\t\tinput.templateName,\r\n\t\t\t\t\tisSignal(value) ? value : signal(value),\r\n\t\t\t\t),\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n\r\n\tmirror?.outputs.forEach(output => {\r\n\t\tconst name = output.templateName;\r\n\r\n\t\tif (name in data) {\r\n\t\t\tconst value = data[\r\n\t\t\t\tname as keyof typeof data\r\n\t\t\t] as unknown as () => {};\r\n\t\t\tbindings.push(outputBinding(output.templateName, value));\r\n\t\t}\r\n\t});\r\n\r\n\treturn bindings;\r\n};\r\n","export const isNumber = (value: unknown): value is number => {\r\n\tif (typeof value !== 'number' && typeof value !== 'string') return false;\r\n\r\n\treturn !isNaN(+value);\r\n};\r\n","export const MarkUsed = (): PropertyDecorator => () => {\r\n};\r\n","import { DestroyRef, DOCUMENT, ElementRef, inject } from \"@angular/core\";\r\n\r\ninterface OutsideClickEffectOptions {\r\n\texcludeIdsOrElements?: (string | HTMLElement)[];\r\n}\r\n\r\nexport const outsideClickEffect = (fn: (element: EventTarget) => void, options?: OutsideClickEffectOptions) => {\r\n\tconst elementRef = inject(ElementRef);\r\n\tconst destroyRef = inject(DestroyRef);\r\n\tconst document = inject(DOCUMENT);\r\n\r\n\tconst handleClickOutside = (event: MouseEvent) => {\r\n\t\tconst wrapper = elementRef.nativeElement;\r\n\r\n\t\tconst excludedElements = options?.excludeIdsOrElements\r\n\t\t\t?.map(id => typeof id === \"string\" ? document.getElementById(id): id)\r\n\t\t\t?.filter(element => !!element) ?? [];\r\n\r\n\t\tconst isAnExcludedElement = excludedElements.some(excluded => excluded.contains(event.target as HTMLElement));\r\n\r\n\t\tif(isAnExcludedElement) return;\r\n\r\n\t\tif (!wrapper.contains(event.target)) fn(event.target!);\r\n\t};\r\n\r\n\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\r\n\tconst destroy = () => {\r\n\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t};\r\n\r\n\tdestroyRef.onDestroy(destroy);\r\n\r\n\treturn {destroy}\r\n}\r\n","import { DestroyRef, DOCUMENT, ElementRef, inject } from '@angular/core';\r\n\r\ninterface OutsideMouseEnterEffectOptions {\r\n\texcludeIds?: string[];\r\n}\r\n\r\nexport const outsideMouseEnterWatcher = (\r\n\toptions?: OutsideMouseEnterEffectOptions,\r\n) => {\r\n\tconst elementRef = inject(ElementRef);\r\n\tconst destroyRef = inject(DestroyRef);\r\n\tconst document = inject(DOCUMENT);\r\n\r\n\tlet handler: () => void = () => {};\r\n\tlet registered = false;\r\n\r\n\tconst handleMouseOver = (event: MouseEvent) => {\r\n\t\tconst wrapper = elementRef.nativeElement;\r\n\t\tconst related = event.relatedTarget as Node;\r\n\r\n\t\tconst excludedElements =\r\n\t\t\toptions?.excludeIds\r\n\t\t\t\t?.map(id => document.getElementById(id))\r\n\t\t\t\t?.filter(element => !!element) ?? [];\r\n\r\n\t\tconst isStillInside =\r\n\t\t\twrapper.contains(event.target as Node) ||\r\n\t\t\twrapper.contains(related) ||\r\n\t\t\texcludedElements.some(el =>\r\n\t\t\t\tel.contains(event.target as Node) || el.contains(related)\r\n\t\t\t);\r\n\r\n\t\tif (isStillInside) return;\r\n\r\n\t\thandler();\r\n\t};\r\n\r\n\tconst watch = (fn: () => void) => {\r\n\t\thandler = fn;\r\n\r\n\t\tif (!registered) {\r\n\t\t\tdocument.addEventListener('mouseover', handleMouseOver, true);\r\n\t\t\tregistered = true;\r\n\t\t}\r\n\t};\r\n\r\n\tconst stop = () => {\r\n\t\tif (!registered) return;\r\n\t\tdocument.removeEventListener('mouseover', handleMouseOver, true);\r\n\t\tregistered = false;\r\n\t};\r\n\r\n\tdestroyRef.onDestroy(stop);\r\n\r\n\treturn { watch, stop };\r\n};\r\n","/**\r\n * Verifica se o elemento \"target\" está contido dentro do \"container\".\r\n * Isso inclui casos em que o target é o próprio container.\r\n */\r\nexport function isElementInside(target: HTMLElement, container: HTMLElement): boolean {\r\n\tlet node: HTMLElement | null = target\r\n\twhile (node) {\r\n\t\tif (node === container) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\tnode = node.parentElement\r\n\t}\r\n\treturn false\r\n}\r\n","import { DestroyRef, inject, signal, Signal } from '@angular/core';\r\nimport { FktGeometryRect } from 'frakton-ng/internal/types';\r\n\r\ninterface ElementSizeSignalFunction {\r\n\t(element: HTMLElement, options: {startWithNull: true}): Signal<FktGeometryRect | null>;\r\n\t(element: HTMLElement, options?: {startWithNull?: false}): Signal<FktGeometryRect>;\r\n}\r\n\r\nexport const elementSizeSignal: ElementSizeSignalFunction = (element, options) => {\r\n\tconst destroyRef = inject(DestroyRef);\r\n\r\n\tconst size = signal<any>(options?.startWithNull ? null: element.getBoundingClientRect());\r\n\r\n\tconst observer = new ResizeObserver(() => {\r\n\t\tsize.set(element.getBoundingClientRect());\r\n\t});\r\n\r\n\tobserver.observe(element);\r\n\r\n\tdestroyRef.onDestroy(() => {\r\n\t\tobserver.disconnect();\r\n\t});\r\n\r\n\treturn size.asReadonly();\r\n};\r\n","export const isValidDateString = (dateString: string) => {\r\n\tconst date = new Date(dateString);\r\n\treturn !isNaN(date.getTime());\r\n};\r\n","export const wait = (time: number) => {\r\n\treturn new Promise<void>(resolve => setTimeout(resolve, time));\r\n}\r\n","import { isValidDateString } from './is-valid-date-string';\r\n\r\nexport const isIsoDateString = (str: string) =>\r\n\t/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.\\d{3}Z$/.test(str) &&\r\n\tisValidDateString(str);\r\n","import { FktGeometryPosition, FktGeometryPositionCalculationFn } from 'frakton-ng/internal/types';\r\n\r\nconst topStart: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x,\r\n\ty: anchor.y - target.height,\r\n});\r\n\r\nconst topEnd: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x + anchor.width - target.width,\r\n\ty: anchor.y - target.height,\r\n});\r\n\r\nconst topLeft: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x - target.width,\r\n\ty: anchor.y - target.height,\r\n});\r\n\r\nconst topRight: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x + anchor.width,\r\n\ty: anchor.y - target.height,\r\n});\r\n\r\nconst topCenter: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x + anchor.width / 2 - target.width / 2,\r\n\ty: anchor.y - target.height,\r\n});\r\n\r\nconst bottomStart: FktGeometryPositionCalculationFn = (anchor) => ({\r\n\tx: anchor.x,\r\n\ty: anchor.y + anchor.height,\r\n});\r\n\r\nconst bottomEnd: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x + anchor.width - target.width,\r\n\ty: anchor.y + anchor.height,\r\n});\r\n\r\nconst bottomLeft: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x - target.width,\r\n\ty: anchor.y + anchor.height,\r\n});\r\n\r\nconst bottomRight: FktGeometryPositionCalculationFn = (anchor) => ({\r\n\tx: anchor.x + anchor.width,\r\n\ty: anchor.y + anchor.height,\r\n});\r\n\r\nconst bottomCenter: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x + anchor.width / 2 - target.width / 2,\r\n\ty: anchor.y + anchor.height,\r\n});\r\n\r\nconst leftStart: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x - target.width,\r\n\ty: anchor.y,\r\n});\r\n\r\nconst leftCenter: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x - target.width,\r\n\ty: anchor.y + anchor.height / 2 - target.height / 2,\r\n});\r\n\r\nconst leftEnd: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x - target.width,\r\n\ty: anchor.y + anchor.height - target.height,\r\n});\r\n\r\nconst rightStart: FktGeometryPositionCalculationFn = (anchor) => ({\r\n\tx: anchor.x + anchor.width,\r\n\ty: anchor.y,\r\n});\r\n\r\nconst rightEnd: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x + anchor.width,\r\n\ty: anchor.y + anchor.height - target.height,\r\n});\r\n\r\nconst rightCenter: FktGeometryPositionCalculationFn = (anchor, target) => ({\r\n\tx: anchor.x + anchor.width,\r\n\ty: anchor.y + anchor.height / 2 - target.height / 2,\r\n});\r\n\r\nexport const geometryPositionCalculations: Record<FktGeometryPosition, FktGeometryPositionCalculationFn> = {\r\n\t'top-start': topStart,\r\n\t'bottom-start': bottomStart,\r\n\t'left-start': leftStart,\r\n\t'right-start': rightStart,\r\n\t'top-center': topCenter,\r\n\t'bottom-center': bottomCenter,\r\n\t'left-center': leftCenter,\r\n\t'right-center': rightCenter,\r\n\t'top-left': topLeft,\r\n\t'top-right': topRight,\r\n\t'bottom-left': bottomLeft,\r\n\t'bottom-right': bottomRight,\r\n\t'top-end': topEnd,\r\n\t'bottom-end': bottomEnd,\r\n\t'left-end': leftEnd,\r\n\t'right-end': rightEnd,\r\n};\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}