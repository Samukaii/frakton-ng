{"version":3,"file":"frakton-ng-form.mjs","sources":["../../form/src/fkt-form.component.ts","../../form/src/fkt-form.component.html","../../form/src/frakton-ng-form.ts"],"sourcesContent":["import { Component, effect, input, output, untracked } from '@angular/core';\r\nimport { SignalFormGroup } from 'frakton-ng/forms';\r\nimport { MarkUsed } from 'frakton-ng/internal/utils';\r\nimport { SignalFormGroupValue } from 'frakton-ng/forms';\r\nimport { Generic, Prettify } from 'frakton-ng/internal/types';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { FktFormModifier } from './fkt-form.types';\r\n\r\n\r\n@Component({\r\n\tselector: 'fkt-form',\r\n\timports: [\r\n\t\tFormsModule\r\n\t],\r\n\ttemplateUrl: './fkt-form.component.html',\r\n\tstyleUrl: './fkt-form.component.scss',\r\n})\r\nexport class FktFormComponent<\r\n\tInputModel extends Generic,\r\n\tForm extends SignalFormGroup<any>,\r\n> {\r\n\tform = input.required<Form>();\r\n\tdata = input<InputModel>();\r\n\tformModifiers = input<FktFormModifier<InputModel, Form>>();\r\n\tsubmit = output<Prettify<SignalFormGroupValue<Form>>>();\r\n\r\n\t@MarkUsed()\r\n\tprotected updateForm = effect(() => {\r\n\t\tthis.data();\r\n\t\tthis.form();\r\n\t\tthis.formModifiers();\r\n\r\n\t\tuntracked(() => {\r\n\t\t\tthis.patchForm();\r\n\t\t});\r\n\t});\r\n\r\n\tprivate patchForm() {\r\n\t\tconst data = this.data();\r\n\t\tconst form = this.form();\r\n\t\tconst modifiers = this.formModifiers();\r\n\r\n\t\tif (!data) return;\r\n\r\n\t\tconst controls = form.controls;\r\n\r\n\t\tconst finalObject: Generic = {};\r\n\r\n\t\tfor (const controlKey in controls) {\r\n\t\t\tconst modifier =\r\n\t\t\t\tmodifiers?.[controlKey as keyof typeof modifiers] ?? null;\r\n\r\n\t\t\tif (modifier) {\r\n\t\t\t\tfinalObject[controlKey] = modifier(data);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (data[controlKey]) finalObject[controlKey] = data[controlKey];\r\n\t\t}\r\n\r\n\t\tform.patchValue(finalObject);\r\n\t}\r\n\r\n\tprotected onSubmit() {\r\n\t\tthis.submit.emit(this.form().value() as unknown as Prettify<SignalFormGroupValue<Form>>);\r\n\t}\r\n}\r\n","<form (ngSubmit)=\"onSubmit()\">\r\n\t<ng-content/>\r\n</form>\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}