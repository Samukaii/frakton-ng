<div
	[style.padding]="inputPadding()"
	class="input">
	<input
		[spellcheck]="spellcheck() ? 'true' : ''"
		[class.password]="type() === 'password'"
		[class.error]="invalid() && touched()"
		[class.show-placeholder]="!!formattedValue() || focused()"
		[class.no-label]="hideLabel()"
		[attr.aria-describedby]="ariaDescribedby()"
		[step]="step()"
		#input
		[type]="inputType() !== 'number'? inputType() : 'text'"
		[attr.inputmode]="inputType() === 'number' ? 'decimal' : 'text'"
		[placeholder]="placeholder()"
		[fktControlFormatter]="$any(formatterFn())"
		(keydown)="onKeyDown($event)"
		[(modelValue)]="value"
		(focus)="onFocus($event)"
		(blur)="onBlur($event)"
		[attr.aria-invalid]="invalid()"
		[attr.aria-errormessage]="errors()[0]?.message"
		[attr.aria-label]="label()"
		[disabled]="disabled()"
	/>

	<div class="border"
		 [class.error]="invalid() && touched()"
		 [class.focused]="focused()"
		 [class.float]="!!formattedValue() || focused()"
		 [class.disabled]="disabled()"
	>
		<div class="left">

		</div>
		<div
			[class.no-label]="hideLabel()"
			class="center">
			<label
				aria-hidden="true"
			>{{ label() }}</label>
		</div>

		<div class="right">
			@if (suffix()) {
				<div class="input__suffix-content">
					<ng-container
						[ngTemplateOutlet]="suffix()!.templateRef"
					/>
				</div>

			}
			@else if (type() === "number" && !hideNumericControl()) {
				<div class="numeric-control">
					<fkt-icon
						(mousedown)="increaseNumber()"
						name="chevron-up"/>
					<fkt-icon
						(mousedown)="decreaseNumber()"
						name="chevron-down"/>
				</div>
			}
			@else if (type() === "password") {
				<div class="input__suffix-password" (click)="$event.stopImmediatePropagation()">
					@if (showPassword()) {
						<fkt-button
							(click)="$event.stopImmediatePropagation(); showPassword.set(false)"
							theme="basic"
							ariaLabel="Hide password"
							icon="eye-slash"
						/>
					} @else {
						<fkt-button
							(click)="$event.stopImmediatePropagation(); showPassword.set(true)"
							theme="basic"
							ariaLabel="Show password"
							icon="eye"
						/>
					}
				</div>
			}
		</div>
	</div>
</div>
