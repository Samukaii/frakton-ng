<div class="label-container">
	<label
		aria-hidden="true"
		[class.error]="!!error.message()"
		[class.float]="control().viewValue()"
	>{{ label() }}</label>
</div>

<div class="select">
	<div
		#element
		class="select__container"
		[class.opened]="opened()"
		[class.error]="!!error.message()"
		(click)="openOverlay(element)"
		(keydown)="handleKeydown(element, $event)"
		role="combobox"
		aria-haspopup="listbox"
		tabindex="0"
		[attr.aria-labelledby]="labelId"
		[attr.aria-expanded]="opened()"
		[attr.aria-controls]="opened() ? listBoxId : null"
		[attr.aria-activedescendant]="opened() ? activeOptionId() : null"
		[attr.aria-disabled]="control().disabled()"
		[attr.aria-label]="label()"
		[attr.aria-invalid]="!!error.message()"
		[attr.aria-errormessage]="!!error.message() ? errorId : null"
	>
		<div>
			@if (selectedOption()?.label) {
				<span>
				{{ selectedOption()?.label }}
				</span>
			} @else if (opened()) {
				<span class="placeholder" aria-hidden="true">{{ placeholder() }}</span>
			}
		</div>
		<fkt-icon aria-hidden="true" name="chevron-down"/>
	</div>
</div>

<fkt-field-error
	#error
	[id]="errorId"
	aria-live="polite"
	[control]="control()"
/>
