import { Meta, Story } from '@storybook/addon-docs/blocks';
import * as fktNavigatorStories from './fkt-navigator.stories';

<Meta of={fktNavigatorStories} />

The **FktNavigator** component provides a reusable navigation control with previous/next buttons and a flexible content area. It's designed to be a consistent navigation pattern across different components and contexts.

## Key Features

- **Flexible Content**: Center content area using Angular's content projection
- **Navigation Controls**: Previous and next buttons with customizable states
- **Disabled State Support**: Individual control over button availability
- **Consistent Styling**: Uniform appearance across different use cases
- **Icon Integration**: Built-in chevron icons for navigation direction
- **Event Emission**: Clean event handling for navigation actions
- **Responsive Layout**: Proper spacing and alignment on all screen sizes

## Basic Usage

```typescript
import { FktNavigatorComponent } from '@frakton-ng/core';

@Component({
  selector: 'app-example',
  template: `
    <fkt-navigator
      (previous)="goToPrevious()"
      (next)="goToNext()"
      [canGoToPrevious]="canGoPrev"
      [canGoToNext]="canGoNext"
    >
      <h2>Current Page Title</h2>
    </fkt-navigator>
  `,
  standalone: true,
  imports: [FktNavigatorComponent]
})
export class ExampleComponent {
  canGoPrev = true;
  canGoNext = true;

  goToPrevious() {
    // Previous navigation logic
  }

  goToNext() {
    // Next navigation logic
  }
}
```

## Advanced Usage

### Page Navigation
```typescript
@Component({
  template: `
    <fkt-navigator
      (previous)="currentPage = currentPage - 1"
      (next)="currentPage = currentPage + 1"
      [canGoToPrevious]="currentPage > 1"
      [canGoToNext]="currentPage < totalPages"
    >
      <span>Page {{ currentPage }} of {{ totalPages }}</span>
    </fkt-navigator>
  `
})
export class PageNavigationComponent {
  currentPage = 1;
  totalPages = 10;
}
```

### Date Navigation
```typescript
@Component({
  template: `
    <fkt-navigator
      (previous)="previousMonth()"
      (next)="nextMonth()"
    >
      <strong>{{ currentDate | date:'MMMM yyyy' }}</strong>
    </fkt-navigator>
  `
})
export class DateNavigationComponent {
  currentDate = new Date();

  previousMonth() {
    const newDate = new Date(this.currentDate);
    newDate.setMonth(newDate.getMonth() - 1);
    this.currentDate = newDate;
  }

  nextMonth() {
    const newDate = new Date(this.currentDate);
    newDate.setMonth(newDate.getMonth() + 1);
    this.currentDate = newDate;
  }
}
```

## Configuration Options

### Input Properties
- **`canGoToPrevious`**: `boolean` - Whether the previous button is enabled (default: `true`)
- **`canGoToNext`**: `boolean` - Whether the next button is enabled (default: `true`)

### Output Events
- **`previous`**: `EventEmitter<void>` - Emitted when previous button is clicked
- **`next`**: `EventEmitter<void>` - Emitted when next button is clicked

### Content Projection
The component accepts any content between its tags, which will be centered between the navigation buttons.

## Use Cases

Perfect for page navigation, date navigation, item browsing, image galleries, multi-step forms, wizards, and any scenario requiring previous/next navigation patterns. Ideal for data pagination and sequential content display.

## Accessibility

- **Keyboard Navigation**: Tab navigation between buttons
- **Screen Reader Support**: Proper ARIA labels on navigation buttons
- **Focus Management**: Logical focus flow
- **Disabled State**: Proper disabled attribute handling
- **Semantic HTML**: Uses button elements for interactive controls

## Performance

- **Event Handling**: Efficient event emission without unnecessary processing
- **Content Projection**: Minimal overhead for content rendering
- **Button States**: Reactive updates without full re-rendering
- **Memory Management**: No subscriptions or complex state management

## Examples

### Basic Navigator

Simple navigation control with previous/next buttons and centered content.

<Story of={fktNavigatorStories.Basic} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-navigator
      (previous)="goToPrevious()"
      (next)="goToNext()"
      [canGoToPrevious]="canGoPrev"
      [canGoToNext]="canGoNext"
    >
      <h2>Page Content</h2>
    </fkt-navigator>
  `,
  standalone: true,
  imports: [FktNavigatorComponent]
})
export class ExampleComponent {
  canGoPrev = true;
  canGoNext = true;

  goToPrevious() {
    console.log('Previous clicked');
  }

  goToNext() {
    console.log('Next clicked');
  }
}
```

### Page Navigation

Navigator configured for page-based navigation with page counter.

<Story of={fktNavigatorStories.PageNavigation} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-navigator
      (previous)="currentPage = currentPage - 1"
      (next)="currentPage = currentPage + 1"
      [canGoToPrevious]="currentPage > 1"
      [canGoToNext]="currentPage < totalPages"
    >
      <span>Page {{ currentPage }} of {{ totalPages }}</span>
    </fkt-navigator>
  `,
  standalone: true,
  imports: [FktNavigatorComponent]
})
export class ExampleComponent {
  currentPage = 1;
  totalPages = 10;
}
```

### Date Navigation

Navigator for browsing through months with formatted date display.

<Story of={fktNavigatorStories.DateNavigation} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-navigator
      (previous)="previousMonth()"
      (next)="nextMonth()"
    >
      <strong>{{ currentDate | date:'MMMM yyyy' }}</strong>
    </fkt-navigator>
  `,
  standalone: true,
  imports: [FktNavigatorComponent]
})
export class ExampleComponent {
  currentDate = new Date();

  previousMonth() {
    const newDate = new Date(this.currentDate);
    newDate.setMonth(newDate.getMonth() - 1);
    this.currentDate = newDate;
  }

  nextMonth() {
    const newDate = new Date(this.currentDate);
    newDate.setMonth(newDate.getMonth() + 1);
    this.currentDate = newDate;
  }
}
```

### Item List Navigation

Navigator for browsing through a list of items with item details display.

<Story of={fktNavigatorStories.ItemNavigation} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-navigator
      (previous)="previousItem()"
      (next)="nextItem()"
      [canGoToPrevious]="currentIndex > 0"
      [canGoToNext]="currentIndex < items.length - 1"
    >
      <div class="text-center">
        <h3 class="font-semibold">{{ currentItem.title }}</h3>
        <span class="text-sm text-gray-600">{{ currentIndex + 1 }} of {{ items.length }}</span>
      </div>
    </fkt-navigator>
  `,
  standalone: true,
  imports: [FktNavigatorComponent]
})
export class ExampleComponent {
  items = [
    { title: 'First Item' },
    { title: 'Second Item' },
    { title: 'Third Item' }
  ];
  currentIndex = 0;

  get currentItem() {
    return this.items[this.currentIndex];
  }

  previousItem() {
    if (this.currentIndex > 0) {
      this.currentIndex--;
    }
  }

  nextItem() {
    if (this.currentIndex < this.items.length - 1) {
      this.currentIndex++;
    }
  }
}
```

### Disabled States

Navigator demonstrating disabled button states based on navigation constraints.

<Story of={fktNavigatorStories.DisabledStates} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-navigator
      (previous)="goToPrevious()"
      (next)="goToNext()"
      [canGoToPrevious]="canGoPrevious"
      [canGoToNext]="canGoNext"
    >
      <div class="text-center">
        <p>Step {{ currentStep }} of {{ totalSteps }}</p>
        <small class="text-gray-500">
          {{ canGoPrevious ? 'Can go back' : 'At first step' }} |
          {{ canGoNext ? 'Can go forward' : 'At last step' }}
        </small>
      </div>
    </fkt-navigator>
  `,
  standalone: true,
  imports: [FktNavigatorComponent]
})
export class ExampleComponent {
  currentStep = 1;
  totalSteps = 3;

  get canGoPrevious() {
    return this.currentStep > 1;
  }

  get canGoNext() {
    return this.currentStep < this.totalSteps;
  }

  goToPrevious() {
    if (this.canGoPrevious) {
      this.currentStep--;
    }
  }

  goToNext() {
    if (this.canGoNext) {
      this.currentStep++;
    }
  }
}
```

### With Loading State

Navigator integrated with async operations showing loading states.

<Story of={fktNavigatorStories.WithLoading} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-navigator
      (previous)="loadPreviousData()"
      (next)="loadNextData()"
      [canGoToPrevious]="!isLoading"
      [canGoToNext]="!isLoading"
    >
      <div class="flex items-center gap-2">
        @if (isLoading) {
          <fkt-spinner [size]="24" [stroke]="2" />
          <span>Loading...</span>
        } @else {
          <span>{{ currentData.title }}</span>
        }
      </div>
    </fkt-navigator>
  `,
  standalone: true,
  imports: [FktNavigatorComponent, FktSpinnerComponent]
})
export class ExampleComponent {
  currentData = { title: 'Item 1' };
  isLoading = false;

  async loadPreviousData() {
    this.isLoading = true;
    try {
      // Simulate async data loading
      await new Promise(resolve => setTimeout(resolve, 1000));
      this.currentData = { title: 'Previous Item' };
    } finally {
      this.isLoading = false;
    }
  }

  async loadNextData() {
    this.isLoading = true;
    try {
      // Simulate async data loading
      await new Promise(resolve => setTimeout(resolve, 1000));
      this.currentData = { title: 'Next Item' };
    } finally {
      this.isLoading = false;
    }
  }
}
```
