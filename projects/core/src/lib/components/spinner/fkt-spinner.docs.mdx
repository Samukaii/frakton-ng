import { Meta, Story } from '@storybook/addon-docs/blocks';
import * as fktSpinnerStories from './fkt-spinner.stories';

<Meta of={fktSpinnerStories} />

The **FktSpinner** component provides a customizable loading indicator with configurable size, stroke width, and color themes. It's designed to give users visual feedback during loading states and async operations.

## Key Features

- **Configurable Size**: Adjustable spinner diameter
- **Stroke Width Control**: Customizable border thickness
- **Color Themes**: Multiple predefined color options
- **CSS Custom Properties**: Uses modern CSS variables for styling
- **Lightweight**: Minimal DOM structure with pure CSS animation
- **Responsive**: Scales appropriately in different containers
- **Accessibility**: Screen reader friendly loading indicator
- **Performance**: Hardware-accelerated CSS animations

## Basic Usage

```typescript
import { FktSpinnerComponent } from '@frakton-ng/core';

@Component({
  selector: 'app-example',
  template: `
    <fkt-spinner />
  `,
  standalone: true,
  imports: [FktSpinnerComponent]
})
export class ExampleComponent {}
```

## Advanced Usage

### Dynamic Configuration
```typescript
@Component({
  template: `
    <fkt-spinner
      [size]="spinnerConfig.size"
      [stroke]="spinnerConfig.stroke"
      [color]="spinnerConfig.color"
    />
  `
})
export class DynamicSpinnerComponent {
  spinnerConfig = {
    size: 40,
    stroke: 4,
    color: 'primary' as FktColor
  };

  setSmallSpinner() {
    this.spinnerConfig = { size: 20, stroke: 2, color: 'primary' };
  }

  setLargeSpinner() {
    this.spinnerConfig = { size: 80, stroke: 8, color: 'green' };
  }

  setWarningSpinner() {
    this.spinnerConfig = { size: 60, stroke: 6, color: 'yellow' };
  }
}
```

## Configuration Options

### Input Properties
- **`size`**: `number` - Spinner diameter in pixels (default: `40`)
- **`stroke`**: `number` - Border thickness in pixels (default: `4`)
- **`color`**: `FktColor` - Color theme ('primary' | 'yellow' | 'red' | 'green') (default: `'primary'`)

### FktColor Type
```typescript
type FktColor = 'primary' | 'yellow' | 'red' | 'green';
```

## Use Cases

Perfect for loading states, button loading indicators, table loading overlays, search results, file uploads, and any async operation requiring user feedback. Ideal for integration with HTTP interceptors and form validation.

## Accessibility

- **ARIA Labels**: Can be enhanced with loading announcements
- **Screen Reader Support**: Semantic loading indication
- **Reduced Motion**: Respects user's motion preferences
- **Focus Management**: Does not interfere with focus flow

## Performance

- **CSS Animations**: Uses hardware-accelerated CSS transforms
- **No JavaScript Animation**: Pure CSS for better performance
- **Lightweight DOM**: Minimal HTML structure
- **Memory Efficient**: No complex state or subscriptions

## Examples

### Default Spinner

Basic spinner with default size and primary color theme.

<Story of={fktSpinnerStories.Default} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-spinner />
  `,
  standalone: true,
  imports: [FktSpinnerComponent]
})
export class ExampleComponent {}
```

### Size Variations

Spinners with different sizes for various use cases and container sizes.

<Story of={fktSpinnerStories.SizeVariations} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <div class="flex items-center gap-4">
      <fkt-spinner [size]="20" [stroke]="2" />
      <fkt-spinner [size]="40" [stroke]="4" />
      <fkt-spinner [size]="60" [stroke]="6" />
      <fkt-spinner [size]="80" [stroke]="8" />
    </div>
  `,
  standalone: true,
  imports: [FktSpinnerComponent]
})
export class ExampleComponent {}
```

### Color Themes

Spinners showcasing different color themes for various semantic meanings.

<Story of={fktSpinnerStories.ColorThemes} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <div class="flex items-center gap-4">
      <fkt-spinner color="primary" />
      <fkt-spinner color="yellow" />
      <fkt-spinner color="red" />
      <fkt-spinner color="green" />
    </div>
  `,
  standalone: true,
  imports: [FktSpinnerComponent]
})
export class ExampleComponent {}
```

### Loading State

Spinner used in a typical loading state scenario with conditional display.

<Story of={fktSpinnerStories.LoadingState} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <div class="p-6 border rounded-lg">
      @if (isLoading) {
        <div class="flex items-center justify-center gap-3">
          <fkt-spinner [size]="40" [stroke]="4" color="primary" />
          <span>Loading data...</span>
        </div>
      } @else {
        <div class="text-green-600">
          âœ“ Data loaded successfully!
        </div>
      }

      <button
        (click)="toggleLoading()"
        class="mt-4 px-3 py-1 bg-blue-500 text-white rounded"
      >
        {{ isLoading ? 'Stop' : 'Start' }} Loading
      </button>
    </div>
  `,
  standalone: true,
  imports: [FktSpinnerComponent]
})
export class ExampleComponent {
  isLoading = true;

  toggleLoading() {
    this.isLoading = !this.isLoading;
  }
}
```

### Button Integration

Spinner integrated within buttons for inline loading states.

<Story of={fktSpinnerStories.ButtonIntegration} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <div class="flex gap-3">
      <button
        (click)="submit()"
        [disabled]="isSubmitting"
        class="flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded disabled:opacity-50"
      >
        @if (isSubmitting) {
          <fkt-spinner [size]="16" [stroke]="2" color="primary" />
        }
        {{ isSubmitting ? 'Submitting...' : 'Submit' }}
      </button>

      <button
        (click)="save()"
        [disabled]="isSaving"
        class="flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded disabled:opacity-50"
      >
        @if (isSaving) {
          <fkt-spinner [size]="16" [stroke]="2" color="green" />
        }
        {{ isSaving ? 'Saving...' : 'Save' }}
      </button>
    </div>
  `,
  standalone: true,
  imports: [FktSpinnerComponent]
})
export class ExampleComponent {
  isSubmitting = false;
  isSaving = false;

  async submit() {
    this.isSubmitting = true;
    await new Promise(resolve => setTimeout(resolve, 2000));
    this.isSubmitting = false;
  }

  async save() {
    this.isSaving = true;
    await new Promise(resolve => setTimeout(resolve, 1500));
    this.isSaving = false;
  }
}
```

### Large Overlay Spinner

Large spinner for full-screen or modal loading overlays.

<Story of={fktSpinnerStories.LargeOverlay} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <div class="relative h-64 bg-gray-100 rounded-lg flex items-center justify-center">
      @if (showOverlay) {
        <div class="absolute inset-0 bg-white bg-opacity-90 flex flex-col items-center justify-center gap-4">
          <fkt-spinner [size]="60" [stroke]="6" color="primary" />
          <div class="text-center">
            <h3 class="font-semibold text-gray-800">Processing...</h3>
            <p class="text-sm text-gray-600">Please wait while we process your request</p>
          </div>
        </div>
      }

      <div class="text-center p-8">
        <h2 class="text-xl font-semibold mb-4">Content Area</h2>
        <button
          (click)="toggleOverlay()"
          class="px-4 py-2 bg-blue-500 text-white rounded"
        >
          {{ showOverlay ? 'Hide' : 'Show' }} Loading Overlay
        </button>
      </div>
    </div>
  `,
  standalone: true,
  imports: [FktSpinnerComponent]
})
export class ExampleComponent {
  showOverlay = false;

  toggleOverlay() {
    this.showOverlay = !this.showOverlay;
  }
}
```

### Custom Configuration

Spinner with dynamic configuration based on different states or conditions.

<Story of={fktSpinnerStories.CustomConfiguration} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <div class="space-y-4">
      <div class="flex items-center justify-center p-6 border rounded-lg">
        <fkt-spinner
          [size]="config.size"
          [stroke]="config.stroke"
          [color]="config.color"
        />
      </div>

      <div class="flex gap-2">
        <button
          (click)="setSmall()"
          class="px-3 py-1 bg-gray-500 text-white rounded text-sm"
        >
          Small
        </button>
        <button
          (click)="setMedium()"
          class="px-3 py-1 bg-blue-500 text-white rounded text-sm"
        >
          Medium
        </button>
        <button
          (click)="setLarge()"
          class="px-3 py-1 bg-green-500 text-white rounded text-sm"
        >
          Large
        </button>
        <button
          (click)="setWarning()"
          class="px-3 py-1 bg-yellow-500 text-white rounded text-sm"
        >
          Warning
        </button>
        <button
          (click)="setError()"
          class="px-3 py-1 bg-red-500 text-white rounded text-sm"
        >
          Error
        </button>
      </div>

      <div class="text-sm text-gray-600">
        Size: {{ config.size }}px | Stroke: {{ config.stroke }}px | Color: {{ config.color }}
      </div>
    </div>
  `,
  standalone: true,
  imports: [FktSpinnerComponent]
})
export class ExampleComponent {
  config = { size: 40, stroke: 4, color: 'primary' as FktColor };

  setSmall() {
    this.config = { size: 24, stroke: 2, color: 'primary' };
  }

  setMedium() {
    this.config = { size: 40, stroke: 4, color: 'primary' };
  }

  setLarge() {
    this.config = { size: 64, stroke: 6, color: 'green' };
  }

  setWarning() {
    this.config = { size: 48, stroke: 5, color: 'yellow' };
  }

  setError() {
    this.config = { size: 48, stroke: 5, color: 'red' };
  }
}
