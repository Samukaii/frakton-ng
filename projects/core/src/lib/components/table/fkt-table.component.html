@let action = mainAction();

<div class="table-container">
	@if ((loading() || !data().length)) {
		<div class="table-container__no-data">
			@if (!noHeaderWhenEmpty() && !loading()) {
				<div class="table-container__no-data-header">
					@if (action) {
						<fkt-buttons-list
							[actions]="[action]"
						/>
					}
				</div>
			}

			<div class="table-container__no-data-content">
				@if (loading()) {
					<fkt-spinner [size]="80" [stroke]="8"/>
				} @else {
					@let noResultsVar = noResults();

					<fkt-no-results
						borderless
						[noResults]="noResultsVar"
					/>
				}
			</div>
		</div>

	} @else {
		<table class="table">
			<thead class="table__header">
			<tr>
				@for (header of headers(); track header.position) {
					<th class="table__header-title">
						<p>
							{{ header.name }}
						</p>
					</th>
				}
				@if (!!actionsFn() || !!action) {
					<th class="table__header-actions">
						@if (action) {
							<div>
								<fkt-buttons-list
									[actions]="[action]"
								/>
							</div>
						}
					</th>
				}
			</tr>
			</thead>
			<tbody>
				@for (item of columns(); track item) {
					<tr
						[class]="item.item | call: classesFn()"
					>
						@for (column of item.columns; track column.position) {
							<td class="table__header-cell">
								<fkt-table-cell-renderer
									[column]="column"
								/>
							</td>
						}
						@if (!!actionsFn() || !!action) {
							<td class="table__header-cell--actions">
								<div>
									<fkt-buttons-list
										[actions]="actions()[$index]"
									/>
								</div>
							</td>
						}
					</tr>
				}
			</tbody>
		</table>
	}
</div>
