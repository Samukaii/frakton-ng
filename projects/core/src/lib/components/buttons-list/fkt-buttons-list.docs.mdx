import { Meta, Story } from '@storybook/addon-docs/blocks';
import * as fktButtonsListStories from './fkt-buttons-list.stories';

<Meta of={fktButtonsListStories} />

The **FktButtonsList** component provides a flexible container for displaying multiple buttons with consistent spacing and alignment. Built with Angular signals and customizable layout options, it supports both horizontal and vertical orientations with various alignment strategies.

## Key Features

- **Flexible Layouts**: Horizontal and vertical orientation options
- **Smart Alignment**: Multiple alignment options for precise positioning
- **Fill Options**: Buttons can expand to fill available space
- **Action Integration**: Seamless integration with FktButtonAction interface
- **Context Support**: Generic context passing for action handlers
- **Tooltip Support**: Built-in tooltip integration for enhanced UX
- **Responsive Design**: Adapts to container size and orientation
- **Signal-Based**: Built with Angular signals for optimal performance

## Basic Usage

```typescript
import { FktButtonsListComponent } from '@frakton-ng/core';

@Component({
  selector: 'app-example',
  template: `
    <fkt-buttons-list
      [actions]="buttonActions"
      [orientation]="'horizontal'"
      [fill]="false"
    />
  `,
  standalone: true,
  imports: [FktButtonsListComponent]
})
export class ExampleComponent {
  buttonActions = [
    {
      identifier: 'save',
      text: 'Save',
      theme: 'raised',
      color: 'primary',
      click: () => this.onSave()
    },
    {
      identifier: 'cancel',
      text: 'Cancel',
      theme: 'stroked',
      color: 'gray',
      click: () => this.onCancel()
    }
  ];

  onSave() {
    console.log('Save action clicked');
  }

  onCancel() {
    console.log('Cancel action clicked');
  }
}
```

## Advanced Usage

### Form Action Buttons

```typescript
@Component({
  template: `
    <div class="space-y-6">
      <!-- Form with action buttons -->
      <form (ngSubmit)="onSubmit()" class="space-y-4">
        <div>
          <label class="block text-sm font-medium mb-2">Name</label>
          <input
            type="text"
            [(ngModel)]="formData.name"
            class="w-full px-3 py-2 border rounded-md"
            placeholder="Enter name"
          />
        </div>

        <div>
          <label class="block text-sm font-medium mb-2">Email</label>
          <input
            type="email"
            [(ngModel)]="formData.email"
            class="w-full px-3 py-2 border rounded-md"
            placeholder="Enter email"
          />
        </div>

        <!-- Horizontal buttons aligned to the right -->
        <div class="flex justify-end">
          <fkt-buttons-list
            [actions]="formActions"
            [orientation]="'horizontal'"
            [horizontalAlignment]="'end'"
            [context]="formData"
          />
        </div>
      </form>
    </div>
  `
})
export class FormActionsComponent {
  formData = {
    name: '',
    email: ''
  };

  formActions = [
    {
      identifier: 'reset',
      text: 'Reset',
      theme: 'basic',
      color: 'gray',
      click: (context: any) => this.resetForm(context)
    },
    {
      identifier: 'save-draft',
      text: 'Save Draft',
      theme: 'stroked',
      color: 'blue',
      click: (context: any) => this.saveDraft(context)
    },
    {
      identifier: 'submit',
      text: 'Submit',
      theme: 'raised',
      color: 'green',
      click: (context: any) => this.submitForm(context)
    }
  ];

  resetForm(context: any) {
    this.formData = { name: '', email: '' };
    console.log('Form reset');
  }

  saveDraft(context: any) {
    console.log('Draft saved:', context);
  }

  submitForm(context: any) {
    console.log('Form submitted:', context);
  }

  onSubmit() {
    // Handle form submission
  }
}
```

### Data Table Actions

```typescript
@Component({
  template: `
    <div class="space-y-4">
      <!-- Table with row actions -->
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let user of users; trackBy: trackUser">
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ user.name }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ user.email }}</td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span [class]="getStatusClass(user.status)">{{ user.status }}</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <fkt-buttons-list
                  [actions]="getRowActions(user)"
                  [orientation]="'horizontal'"
                  [context]="user"
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Bulk actions -->
      <div class="flex justify-between items-center">
        <div class="text-sm text-gray-600">
          {{ selectedUsers.length }} of {{ users.length }} users selected
        </div>
        <fkt-buttons-list
          [actions]="bulkActions"
          [orientation]="'horizontal'"
          [context]="selectedUsers"
        />
      </div>
    </div>
  `
})
export class DataTableComponent {
  users = [
    { id: 1, name: 'John Doe', email: 'john@example.com', status: 'active' },
    { id: 2, name: 'Jane Smith', email: 'jane@example.com', status: 'inactive' },
    { id: 3, name: 'Bob Johnson', email: 'bob@example.com', status: 'pending' }
  ];

  selectedUsers: any[] = [];

  getRowActions(user: any) {
    return [
      {
        identifier: 'view',
        icon: 'eye',
        variant: 'icon',
        theme: 'basic',
        color: 'blue',
        tooltip: 'View Details',
        click: (context: any) => this.viewUser(context)
      },
      {
        identifier: 'edit',
        icon: 'pencil',
        variant: 'icon',
        theme: 'basic',
        color: 'green',
        tooltip: 'Edit User',
        click: (context: any) => this.editUser(context)
      },
      {
        identifier: 'delete',
        icon: 'trash',
        variant: 'icon',
        theme: 'basic',
        color: 'red',
        tooltip: 'Delete User',
        click: (context: any) => this.deleteUser(context)
      }
    ];
  }

  bulkActions = [
    {
      identifier: 'export',
      text: 'Export',
      icon: 'download',
      theme: 'stroked',
      color: 'blue',
      click: (context: any[]) => this.exportUsers(context)
    },
    {
      identifier: 'activate',
      text: 'Activate Selected',
      theme: 'raised',
      color: 'green',
      click: (context: any[]) => this.activateUsers(context)
    },
    {
      identifier: 'delete-bulk',
      text: 'Delete Selected',
      theme: 'raised',
      color: 'red',
      click: (context: any[]) => this.deleteUsers(context)
    }
  ];

  trackUser(index: number, user: any) {
    return user.id;
  }

  getStatusClass(status: string) {
    const classes = {
      active: 'px-2 py-1 text-xs rounded-full bg-green-100 text-green-800',
      inactive: 'px-2 py-1 text-xs rounded-full bg-red-100 text-red-800',
      pending: 'px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-800'
    };
    return classes[status as keyof typeof classes] || '';
  }

  viewUser(user: any) {
    console.log('View user:', user);
  }

  editUser(user: any) {
    console.log('Edit user:', user);
  }

  deleteUser(user: any) {
    console.log('Delete user:', user);
  }

  exportUsers(users: any[]) {
    console.log('Export users:', users);
  }

  activateUsers(users: any[]) {
    console.log('Activate users:', users);
  }

  deleteUsers(users: any[]) {
    console.log('Delete users:', users);
  }
}
```

### Vertical Sidebar Actions

```typescript
@Component({
  template: `
    <div class="flex h-screen">
      <!-- Sidebar with vertical buttons -->
      <div class="w-64 bg-gray-50 border-r border-gray-200 p-4">
        <h2 class="text-lg font-semibold mb-4">Actions</h2>

        <fkt-buttons-list
          [actions]="sidebarActions"
          [orientation]="'vertical'"
          [verticalAlignment]="'start'"
          [fill]="true"
          class="space-y-2"
        />

        <hr class="my-6" />

        <h3 class="text-md font-medium mb-3">Quick Tools</h3>
        <fkt-buttons-list
          [actions]="toolActions"
          [orientation]="'vertical'"
          [fill]="true"
          class="space-y-1"
        />
      </div>

      <!-- Main content area -->
      <div class="flex-1 p-6">
        <h1 class="text-2xl font-bold mb-4">Main Content</h1>
        <p class="text-gray-600">Content area with sidebar actions.</p>

        <!-- Floating action buttons -->
        <div class="fixed bottom-6 right-6">
          <fkt-buttons-list
            [actions]="floatingActions"
            [orientation]="'vertical'"
            [verticalAlignment]="'end'"
            class="space-y-2"
          />
        </div>
      </div>
    </div>
  `
})
export class SidebarActionsComponent {
  sidebarActions = [
    {
      identifier: 'dashboard',
      text: 'Dashboard',
      icon: 'home',
      iconPosition: 'left',
      theme: 'basic',
      color: 'blue',
      click: () => this.navigateTo('dashboard')
    },
    {
      identifier: 'users',
      text: 'Users',
      icon: 'users',
      iconPosition: 'left',
      theme: 'basic',
      color: 'blue',
      click: () => this.navigateTo('users')
    },
    {
      identifier: 'settings',
      text: 'Settings',
      icon: 'cog',
      iconPosition: 'left',
      theme: 'basic',
      color: 'blue',
      click: () => this.navigateTo('settings')
    },
    {
      identifier: 'reports',
      text: 'Reports',
      icon: 'chart',
      iconPosition: 'left',
      theme: 'basic',
      color: 'blue',
      click: () => this.navigateTo('reports')
    }
  ];

  toolActions = [
    {
      identifier: 'search',
      text: 'Search',
      icon: 'search',
      variant: 'icon',
      theme: 'stroked',
      color: 'gray',
      tooltip: 'Quick Search',
      click: () => this.openSearch()
    },
    {
      identifier: 'notifications',
      text: 'Notifications',
      icon: 'bell',
      variant: 'icon',
      theme: 'stroked',
      color: 'gray',
      tooltip: 'View Notifications',
      click: () => this.showNotifications()
    },
    {
      identifier: 'help',
      text: 'Help',
      icon: 'help',
      variant: 'icon',
      theme: 'stroked',
      color: 'gray',
      tooltip: 'Get Help',
      click: () => this.openHelp()
    }
  ];

  floatingActions = [
    {
      identifier: 'add',
      icon: 'plus',
      variant: 'icon',
      theme: 'raised',
      color: 'primary',
      tooltip: 'Add New Item',
      click: () => this.addNewItem()
    },
    {
      identifier: 'chat',
      icon: 'chat',
      variant: 'icon',
      theme: 'raised',
      color: 'green',
      tooltip: 'Open Chat',
      click: () => this.openChat()
    }
  ];

  navigateTo(route: string) {
    console.log('Navigate to:', route);
  }

  openSearch() {
    console.log('Open search');
  }

  showNotifications() {
    console.log('Show notifications');
  }

  openHelp() {
    console.log('Open help');
  }

  addNewItem() {
    console.log('Add new item');
  }

  openChat() {
    console.log('Open chat');
  }
}
```

## Configuration Options

### Input Properties
- **`actions`** (required): `FktButtonAction[]` - Array of button configurations
- **`context`**: `T` - Context object passed to button click handlers
- **`orientation`**: `'horizontal' | 'vertical'` - Layout direction (default: `'horizontal'`)
- **`fill`**: `boolean` - Whether buttons should expand to fill available space (default: `false`)
- **`verticalAlignment`**: `'start' | 'space-between' | 'space-evenly' | 'space-around' | 'end'` - Vertical alignment (default: `'start'`)
- **`horizontalAlignment`**: `'start' | 'space-between' | 'space-evenly' | 'space-around' | 'end'` - Horizontal alignment (default: `'start'`)

### FktButtonAction Interface
```typescript
interface FktButtonAction<Context = any> {
  identifier: string;          // Unique identifier for the action
  text?: string;              // Button text content
  icon?: FktIconName;         // Optional icon
  iconPosition?: 'left' | 'right'; // Icon position
  theme?: FktButtonTheme;     // Button theme (raised, stroked, basic)
  variant?: FktButtonVariant; // Button variant (default, icon, rect)
  color?: FktColor;           // Button color
  loading?: boolean;          // Loading state
  disabled?: boolean;         // Disabled state
  tooltip?: string;           // Tooltip text
  click?: (context: Context) => void; // Click handler function
}
```

### Layout Options

#### Orientation
- **`horizontal`**: Buttons arranged in a row
- **`vertical`**: Buttons arranged in a column

#### Alignment Options
- **`start`**: Align to start of container
- **`space-between`**: Even spacing between buttons
- **`space-evenly`**: Equal spacing around all buttons
- **`space-around`**: Equal spacing around each button
- **`end`**: Align to end of container

## Use Cases

### Form Actions
Perfect for form button groups:
- Submit, cancel, and reset buttons
- Multi-step form navigation
- Save draft and publish actions
- Form validation controls

### Data Tables
Ideal for table action buttons:
- Row-level CRUD operations
- Bulk action controls
- Export and import functions
- Status change buttons

### Navigation
Great for navigation interfaces:
- Sidebar navigation menus
- Tab-based navigation
- Breadcrumb actions
- Page controls

### Toolbar Actions
Essential for toolbar implementations:
- Editor toolbars
- Action bars
- Context menus
- Quick action panels

## Accessibility

- **Keyboard Navigation**: Full keyboard support with Tab navigation
- **Screen Reader Support**: Button actions properly announced
- **Focus Management**: Logical focus flow between buttons
- **Tooltip Integration**: Enhanced context with accessible tooltips
- **High Contrast**: Supports system high contrast modes
- **ARIA Labels**: Proper labeling for complex button groups

## Performance

- **Efficient Rendering**: Optimized button rendering with OnPush strategy
- **Context Passing**: Efficient context handling without unnecessary re-renders
- **Memory Management**: Proper cleanup of event handlers
- **Signal-Based**: Built with Angular signals for optimal performance

## Examples

### Basic Buttons List

A horizontal list of action buttons with different themes and colors, perfect for form actions.

<Story of={fktButtonsListStories.Preview} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-buttons-list
      [actions]="buttonActions"
      [orientation]="'horizontal'"
    />
  `,
  standalone: true,
  imports: [FktButtonsListComponent]
})
export class ExampleComponent {
  buttonActions = [
    {
      identifier: "action-1",
      theme: "raised",
      color: "primary",
      text: "Action 1",
      click: () => console.log('Action 1 clicked')
    },
    {
      identifier: "action-2",
      theme: "stroked",
      color: "green",
      text: "Action 2",
      variant: "default",
      click: () => console.log('Action 2 clicked')
    },
    {
      identifier: "action-3",
      theme: "basic",
      color: "red",
      text: "Action 3",
      click: () => console.log('Action 3 clicked')
    },
    {
      identifier: "action-4",
      theme: "raised",
      color: "yellow",
      text: "Action 4",
      click: () => console.log('Action 4 clicked')
    },
    {
      identifier: "action-5",
      theme: "raised",
      icon: "plus",
      variant: "icon",
      color: "primary",
      click: () => console.log('Add clicked')
    },
    {
      identifier: "action-6",
      theme: "basic",
      icon: "trash",
      variant: "rect",
      color: "red",
      click: () => console.log('Delete clicked')
    }
  ];
}
```

### Form Actions

Form action buttons with cancel, save, and submit actions using different alignment options.

<Story of={fktButtonsListStories.FormActions} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-buttons-list
      [actions]="formActions"
      [orientation]="'horizontal'"
      [horizontalAlignment]="'end'"
    />
  `,
  standalone: true,
  imports: [FktButtonsListComponent]
})
export class ExampleComponent {
  formActions = [
    {
      identifier: "cancel",
      text: 'Cancel',
      theme: "basic",
      color: "gray",
      click: () => this.onCancel()
    },
    {
      identifier: "save-draft",
      text: 'Save Draft',
      theme: "stroked",
      color: "blue",
      click: () => this.onSaveDraft()
    },
    {
      identifier: "submit",
      text: 'Submit',
      theme: "raised",
      color: "primary",
      click: () => this.onSubmit()
    }
  ];

  onCancel() {
    console.log('Form cancelled');
  }

  onSaveDraft() {
    console.log('Draft saved');
  }

  onSubmit() {
    console.log('Form submitted');
  }
}
```

### Vertical Orientation

Buttons arranged vertically with filled button style and center alignment.

<Story of={fktButtonsListStories.VerticalOrientation} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-buttons-list
      [actions]="verticalActions"
      [orientation]="'vertical'"
      [verticalAlignment]="'start'"
    />
  `,
  standalone: true,
  imports: [FktButtonsListComponent]
})
export class ExampleComponent {
  verticalActions = [
    {
      identifier: "create",
      text: 'Create New',
      icon: "plus",
      theme: "raised",
      color: "primary",
      click: () => console.log('Create new')
    },
    {
      identifier: "import",
      text: 'Import Data',
      icon: "upload",
      theme: "raised",
      color: "blue",
      click: () => console.log('Import data')
    },
    {
      identifier: "export",
      text: 'Export All',
      icon: "download",
      theme: "raised",
      color: "green",
      click: () => console.log('Export all')
    }
  ];
}
```

### Icon Only Actions

Compact icon-only buttons with tooltips for space-efficient toolbars.

<Story of={fktButtonsListStories.IconOnly} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-buttons-list
      [actions]="iconOnlyActions"
      [orientation]="'horizontal'"
      [horizontalAlignment]="'start'"
    />
  `,
  standalone: true,
  imports: [FktButtonsListComponent]
})
export class ExampleComponent {
  iconOnlyActions = [
    {
      identifier: "copy",
      icon: "copy",
      variant: "icon",
      theme: "basic",
      color: "blue",
      click: () => console.log('Copy'),
      tooltip: 'Copy to clipboard'
    },
    {
      identifier: "edit",
      icon: "edit",
      variant: "icon",
      theme: "basic",
      color: "green",
      click: () => console.log('Edit'),
      tooltip: 'Edit item'
    },
    {
      identifier: "delete",
      icon: "trash",
      variant: "icon",
      theme: "basic",
      color: "red",
      click: () => console.log('Delete'),
      tooltip: 'Delete item'
    }
  ];
}
```

### Data Table Actions

Action buttons commonly used in data tables for row-level operations.

<Story of={fktButtonsListStories.DataTableActions} />

```typescript
@Component({
  selector: 'app-example',
  template: `
    <fkt-buttons-list
      [actions]="tableActions"
      [orientation]="'horizontal'"
      [horizontalAlignment]="'end'"
    />
  `,
  standalone: true,
  imports: [FktButtonsListComponent]
})
export class ExampleComponent {
  tableActions = [
    {
      identifier: "view",
      text: 'View',
      icon: "eye",
      theme: "basic",
      color: "blue",
      click: () => console.log('View record')
    },
    {
      identifier: "edit",
      text: 'Edit',
      icon: "pencil",
      theme: "stroked",
      color: "green",
      click: () => console.log('Edit record')
    },
    {
      identifier: "delete",
      text: 'Delete',
      icon: "trash",
      theme: "basic",
      color: "red",
      click: () => console.log('Delete record')
    }
  ];
}
```
